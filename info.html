<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Irra Store</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            line-height: 1.6;
        }

        .registration-container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }

        .btn {
            width: 100%;
            padding: 12px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
            margin-bottom: 10px;
        }

        .btn:hover {
            background-color: #45a049;
        }

        .status-message {
            text-align: center;
            margin-top: 15px;
            padding: 10px;
            border-radius: 4px;
        }

        .status-message.success {
            background-color: #dff0d8;
            color: #3c763d;
        }

        .status-message.error {
            background-color: #f2dede;
            color: #a94442;
        }

        h1 {
            text-align: center;
            color: #4CAF50;
            margin-bottom: 20px;
        }

        .instructions {
            font-size: 0.8em;
            color: #666;
            text-align: center;
            margin-bottom: 15px;
        }

        .invoice {
            margin-top: 20px;
            padding: 15px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        /* Enhanced input and select styles */
.form-group input, .form-group select {
    width: 100%;
    padding: 12px;
    border: 2px solid #ddd;
    border-radius: 6px;
    box-sizing: border-box;
    font-size: 14px;
    transition: all 0.3s ease;
    background-color: #f9f9f9;
    color: #333;
}

.form-group input:focus, .form-group select:focus {
    border-color: #4CAF50;
    outline: none;
    box-shadow: 0 0 5px rgba(76, 175, 80, 0.3);
    background-color: #fff;
}

.form-group input:hover, .form-group select:hover {
    border-color: #aaa;
}

/* Custom styling for the dropdown arrow in select elements */
.form-group select {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%234CAF50' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-size: 16px;
    padding-right: 30px;
}

/* Placeholder styling */
.form-group input::placeholder {
    color: #999;
    opacity: 0.8;
}

/* Label enhancements */
.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: bold;
    color: #333;
    font-size: 14px;
}
    </style>
</head>
<body>
    <div class="registration-container">
        <h1>Irra Store</h1>
        <div class="instructions">
            Enter your Telegram username, select a product, and select the price.
        </div>
        <form id="registrationForm">
            <!-- Telegram Username Input -->
            <div class="form-group">
                <label for="telegramUsername">Telegram Username</label>
                <input type="text" id="telegramUsername" name="telegramUsername" required placeholder="Enter your Telegram username.Ex(@....)" minlength="3" maxlength="50">
            </div>

            <!-- Product Dropdown (replacing Skin Name Input) -->
            <div class="form-group">
                <label for="product">Select Product</label>
                <select id="product" name="product" required>
                    <option value="">Select a Skin</option>
                    <option value="Promotion Skin 10/3$">Promotion Skin 10/3$</option>
                    <option value="Fanny (The Aspirants)">Fanny (The Aspirants)</option>
                    <option value="Fanny (AOT)">Fanny (AOT)</option>
                    <option value="Granger (Collector)">Granger (Collector)</option>
                    <option value="Granger (Exocise)">Granger (Exocise)</option>
                    <option value="Hayabusa (Exocise)">Hayabusa (Exocise)</option>
                    <option value="Lancelot (Dawning)">Lancelot (Dawning)</option>
                    <option value="Lancelot (Kishin)">Lancelot (Kishin)</option>
                    <option value="Ling (Collector)">Ling (Collector)</option>
                    <option value="Hayabusa (11.11)">Hayabusa (11.11)</option>
                    <option value="Nolan (11.11)">Nolan (11.11)</option>
                    <option value="Moskov (Allstar)">Moskov (Allstar)</option>
                    <option value="Claude (Prime)">Claude (Prime)</option>
                    <option value="Juian (JJK)">Juian (JJK)</option>
                    <option value="Juian (HxH)">Juian (HxH)</option>
                    <option value="Yi Sun-Shin (Collector)">Yi Sun-Shin (Collector)</option>
                    <option value="Chou (KOF)">Chou (KOF)</option>
                    <option value="Chou (Sainseiya)">Chou (Sainseiya)</option>
                    <option value="Xavier (JJK Gojo)">Xavier (JJK Gojo)</option>
                    <option value="Salena (Zenith)">Salena (Zenith)</option>
                </select>
            </div>

            <!-- Price Dropdown -->
            <div class="form-group">
                <label for="price">Select Price</label>
                <select id="price" name="price" required>
                    <option value="1">Price: $1</option>
                    <option value="3">Promotion Price: $3</option>
                </select>
            </div>

            <!-- Show Invoice Button -->
            <button type="button" class="btn" id="showInvoiceBtn">Show Invoice</button>

            <!-- Invoice Section -->
            <div id="invoiceSection" class="invoice" style="display:none;">
                <h2>Invoice Details</h2>
                <p><strong>Telegram Username:</strong> <span id="invoiceTelegramUsername"></span></p>
                <p><strong>Product:</strong> <span id="invoiceProduct"></span></p>
                <p><strong>Price Selected:</strong> $<span id="invoicePrice"></span></p>
                
                <!-- Pay Button -->
                <button type="button" class="btn" id="payBtn" style="display:none;">Pay</button>
            </div>

            <div id="statusMessage" class="status-message" style="display:none;"></div>
        </form>
    </div>

    <script>
        document.getElementById('showInvoiceBtn').addEventListener('click', function() {
            const telegramUsername = document.getElementById('telegramUsername').value;
            const product = document.getElementById('product').value;
            const price = document.getElementById('price').value;

            // Ensure all fields are filled out before showing invoice
            if (!telegramUsername || !product || !price) {
                alert("Please fill in all the fields.");
                return;
            }

            // Display the invoice details
            document.getElementById('invoiceTelegramUsername').textContent = telegramUsername;
            document.getElementById('invoiceProduct').textContent = product;
            document.getElementById('invoicePrice').textContent = price;

            // Show the invoice section and the Pay button
            document.getElementById('invoiceSection').style.display = 'block';
            document.getElementById('payBtn').style.display = 'block';
        });

        document.getElementById('payBtn').addEventListener('click', async function() {
            const telegramUsername = document.getElementById('telegramUsername').value;
            const product = document.getElementById('product').value;
            const price = document.getElementById('price').value;

            // Your Telegram Bot Token (IMPORTANT: Replace with your actual bot token)
            const BOT_TOKEN = '7950204890:AAHXGCh_WliNYd2TlnCScO_92EL0_QBkX7Y';
            
            // Your Telegram Chat ID (IMPORTANT: Replace with your actual chat ID)
            const CHAT_ID = '5007619095';
            
            // Prepare the message to send to Telegram
            const message = `New Registration:\n` +
                            `Telegram Username: ${telegramUsername}\n` +
                            `Product: ${product}\n` +
                            `Price Selected: $${price}\n` +
                            `Timestamp: ${new Date().toISOString()}`;

            // Status message element
            const statusMessage = document.getElementById('statusMessage');

            try {
                // Send the message to Telegram using Telegram Bot API
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: message
                    })
                });

                // Check if the request was successful
                if (response.ok) {
                    statusMessage.textContent = 'សូមបង់ប្រាក់ជាមុនសិន';
                    statusMessage.className = 'status-message success';
                    statusMessage.style.display = 'block';
                    
                    // Redirect based on selected price
                    let paymentPageUrl = '';
                    if (price === '1') {
                        paymentPageUrl = '1$.html';  // URL for price $1
                    } else if (price === '3') {
                        paymentPageUrl = '1.5$.html';  // URL for price $3
                    }

                    // Redirect to payment page
                    window.location.href = paymentPageUrl;

                } else {
                    throw new Error('Failed to send registration');
                }
            } catch (error) {
                statusMessage.textContent = 'Payment or registration failed. Please try again.';
                statusMessage.className = 'status-message error';
                statusMessage.style.display = 'block';
                console.error('Error:', error);
            }
        });
    </script>
</body>
</html>